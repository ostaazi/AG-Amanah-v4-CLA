import { jsx as _jsx, jsxs as _jsxs } from "react/jsx-runtime";
import React, { useState, useMemo } from 'react';
import { useNavigate } from 'react-router-dom';
import { Category } from '@/types';
import { ICONS } from '@/constants';
const IncidentsCenterView = ({ incidents }) => {
    const navigate = useNavigate();
    const [search, setSearch] = useState('');
    const [filterSeverity, setFilterSeverity] = useState('ALL');
    const filtered = useMemo(() => {
        return incidents.filter(inc => {
            const matchSearch = inc.incident_type.toLowerCase().includes(search.toLowerCase()) ||
                inc.childName.toLowerCase().includes(search.toLowerCase());
            const matchSev = filterSeverity === 'ALL' || inc.severity === filterSeverity;
            return matchSearch && matchSev;
        }).sort((a, b) => new Date(b.created_at).getTime() - new Date(a.created_at).getTime());
    }, [incidents, search, filterSeverity]);
    return (_jsxs("div", { className: "space-y-8 animate-in fade-in duration-700", dir: "rtl", children: [_jsxs("div", { className: "flex flex-col md:flex-row justify-between items-end gap-6", children: [_jsxs("div", { children: [_jsx("h2", { className: "text-4xl font-black text-slate-900 tracking-tighter", children: "\u0645\u0631\u0643\u0632 \u0627\u0644\u062D\u0648\u0627\u062F\u062B \u0627\u0644\u0623\u0645\u0646\u064A\u0629" }), _jsx("p", { className: "text-slate-500 font-bold mt-2", children: "\u0645\u0631\u0627\u0642\u0628\u0629 \u062D\u064A\u0629 \u0644\u0644\u062F\u0641\u0627\u0639 \u0627\u0644\u0622\u0644\u064A \u0648\u0633\u062C\u0644 \u0627\u0644\u062D\u0648\u0627\u062F\u062B \u0627\u0644\u062C\u0646\u0627\u0626\u064A\u0629." })] }), _jsxs("div", { className: "flex gap-3", children: [_jsxs("select", { value: filterSeverity, onChange: (e) => setFilterSeverity(e.target.value), className: "bg-white border-2 border-slate-100 rounded-2xl px-6 py-3 font-black text-xs outline-none focus:border-indigo-500", children: [_jsx("option", { value: "ALL", children: "\u0643\u0627\u0641\u0629 \u0627\u0644\u0645\u0633\u062A\u0648\u064A\u0627\u062A" }), _jsx("option", { value: "critical", children: "CRITICAL" }), _jsx("option", { value: "high", children: "HIGH" }), _jsx("option", { value: "med", children: "MEDIUM" })] }), _jsxs("div", { className: "relative", children: [_jsx("input", { type: "text", placeholder: "\u0628\u062D\u062B \u0641\u064A \u0627\u0644\u062D\u0648\u0627\u062F\u062B...", value: search, onChange: (e) => setSearch(e.target.value), className: "bg-white border-2 border-slate-100 rounded-2xl px-12 py-3 font-bold text-xs outline-none focus:border-indigo-500 w-64" }), _jsx("span", { className: "absolute right-4 top-3.5 opacity-30", children: "\uD83D\uDD0D" })] })] })] }), _jsx("div", { className: "grid grid-cols-1 gap-4", children: filtered.map(inc => (_jsx("div", { onClick: () => navigate(`/incident/${inc.incident_id}`), className: "bg-white p-6 rounded-[2.5rem] border-2 border-slate-50 shadow-sm hover:shadow-xl hover:border-indigo-200 transition-all cursor-pointer group", children: _jsxs("div", { className: "flex flex-col md:flex-row justify-between items-center gap-6", children: [_jsxs("div", { className: "flex items-center gap-6 flex-1", children: [_jsx("div", { className: `w-16 h-16 rounded-2xl flex items-center justify-center text-2xl shadow-inner ${inc.severity === 'critical' ? 'bg-red-50 text-red-600' : 'bg-indigo-50 text-indigo-600'}`, children: inc.incident_type === Category.PREDATOR ? '🐺' : inc.incident_type === Category.TAMPER ? '⚙️' : '⚠️' }), _jsxs("div", { className: "text-right space-y-1", children: [_jsx("h4", { className: "text-xl font-black text-slate-800 group-hover:text-indigo-600 transition-colors", children: inc.incident_type }), _jsxs("div", { className: "flex items-center gap-3", children: [_jsx("span", { className: "text-[10px] font-black text-slate-400 uppercase tracking-widest", children: inc.childName }), _jsx("span", { className: "w-1 h-1 bg-slate-200 rounded-full" }), _jsx("span", { className: "text-[10px] font-black text-slate-400 uppercase tracking-widest", children: new Date(inc.created_at).toLocaleString() })] })] })] }), _jsxs("div", { className: "flex items-center gap-4", children: [_jsx("span", { className: `px-5 py-2 rounded-xl text-[10px] font-black uppercase tracking-widest ${inc.severity === 'critical' ? 'bg-red-600 text-white' : 'bg-amber-400 text-white'}`, children: inc.severity }), _jsx("span", { className: `px-5 py-2 rounded-xl text-[10px] font-black uppercase tracking-widest bg-slate-100 text-slate-600`, children: inc.status }), _jsx("div", { className: "p-3 bg-slate-50 text-slate-300 rounded-xl group-hover:bg-indigo-50 group-hover:text-indigo-600 transition-all", children: _jsx(ICONS.Dashboard, { className: "w-5 h-5" }) })] })] }) }, inc.incident_id))) }), filtered.length === 0 && (_jsxs("div", { className: "py-20 text-center space-y-4 opacity-30", children: [_jsx("div", { className: "text-8xl", children: "\uD83D\uDCDC" }), _jsx("p", { className: "font-black text-xl text-slate-400", children: "\u0644\u0627 \u062A\u0648\u062C\u062F \u062D\u0648\u0627\u062F\u062B \u0646\u0634\u0637\u0629 \u062D\u0627\u0644\u064A\u0627\u064B." })] }))] }));
};
export default IncidentsCenterView;
