import { jsx as _jsx, jsxs as _jsxs } from "react/jsx-runtime";
import React, { useState, useEffect } from 'react';
import { useParams, useNavigate } from 'react-router-dom';
const FamilyIncidentResponseView = ({ currentUser }) => {
    const { id } = useParams();
    const navigate = useNavigate();
    const [incident, setIncident] = useState(null);
    const [timeline, setTimeline] = useState([]);
    const [isLoading, setIsLoading] = useState(true);
    useEffect(() => {
        // محاكاة جلب البيانات من API: /api/incidents/:id/timeline
        setTimeout(() => {
            setIncident({
                incident_id: id || '1',
                child_id: 'c1',
                childName: 'أحمد',
                device_id: 'dev-9923',
                incident_type: 'تواصل مشبوه',
                severity: 'critical',
                status: 'CONTAINED',
                created_at: new Date(Date.now() - 3600000).toISOString(),
                updated_at: new Date().toISOString()
            });
            setTimeline([
                { t: new Date(Date.now() - 3500000).toISOString(), kind: 'EVIDENCE', data: { summary: "رصد رسالة استدراج: 'أرسل لي صورتك'" } },
                { t: new Date(Date.now() - 3499000).toISOString(), kind: 'AUDIT', data: { event_key: "PROTOCOL_TRIGGERED", details: "تفعيل بروتوكول العزل الجنائي" } },
                { t: new Date(Date.now() - 3498000).toISOString(), kind: 'COMMAND', data: { type: "APP_KILL", status: "ACKED", payload: { pkg: "com.instagram" } } },
                { t: new Date(Date.now() - 3497000).toISOString(), kind: 'COMMAND', data: { type: "NET_QUARANTINE", status: "ACKED" } },
                { t: new Date(Date.now() - 3496000).toISOString(), kind: 'AGENT_EVENT', data: { event_key: "SCREEN_LOCKED", battery: 88 } }
            ]);
            setIsLoading(false);
        }, 800);
    }, [id]);
    if (isLoading)
        return _jsx("div", { className: "p-20 text-center font-black animate-pulse text-indigo-600", children: "\u062C\u0627\u0631\u064A \u062A\u062D\u0645\u064A\u0644 \u0627\u0644\u0633\u062C\u0644 \u0627\u0644\u062C\u0646\u0627\u0626\u064A..." });
    return (_jsxs("div", { className: "max-w-6xl mx-auto space-y-8 pb-40 animate-in fade-in duration-700", dir: "rtl", children: [_jsxs("div", { className: "bg-red-600 rounded-[3.5rem] p-10 text-white shadow-2xl relative overflow-hidden border-b-[12px] border-red-900", children: [_jsx("div", { className: "absolute top-0 left-0 w-full h-full bg-[radial-gradient(circle_at_top_right,rgba(255,255,255,0.15)_0%,transparent_60%)]" }), _jsxs("div", { className: "relative z-10 flex flex-col md:flex-row justify-between items-center gap-10", children: [_jsxs("div", { className: "flex items-center gap-8", children: [_jsx("div", { className: "w-24 h-24 bg-white/20 rounded-[2.5rem] flex items-center justify-center text-5xl shadow-inner border border-white/30 animate-pulse", children: "\u26A0\uFE0F" }), _jsxs("div", { children: [_jsx("h2", { className: "text-4xl font-black tracking-tighter mb-1", children: "\u062A\u0641\u0631\u064A\u063A \u0627\u0644\u062D\u0627\u062F\u062B\u0629 \u0627\u0644\u062C\u0646\u0627\u0626\u064A\u0629" }), _jsxs("p", { className: "text-red-100 font-bold opacity-90 text-lg uppercase tracking-widest", children: [incident?.incident_type, " \u2022 ", incident?.childName] })] })] }), _jsxs("div", { className: "bg-slate-900/40 px-8 py-4 rounded-2xl border border-white/10 text-center", children: [_jsx("p", { className: "text-[10px] font-black text-red-200 uppercase tracking-widest mb-1", children: "\u0627\u0644\u062D\u0627\u0644\u0629 \u0627\u0644\u0633\u064A\u0627\u062F\u064A\u0629" }), _jsx("p", { className: "text-2xl font-black", children: incident?.status === 'CONTAINED' ? 'تم الاحتواء ✓' : 'نشطة' })] })] })] }), _jsxs("div", { className: "grid grid-cols-1 lg:grid-cols-12 gap-10", children: [_jsxs("div", { className: "lg:col-span-8 space-y-6", children: [_jsxs("h3", { className: "text-2xl font-black text-slate-800 px-4 flex items-center gap-4", children: [_jsx("span", { className: "p-3 bg-indigo-50 text-indigo-600 rounded-2xl shadow-sm", children: "\uD83D\uDCDC" }), "\u0627\u0644\u062E\u0637 \u0627\u0644\u0632\u0645\u0646\u064A \u0627\u0644\u0645\u0648\u062D\u062F (Unified Chain)"] }), _jsx("div", { className: "space-y-4", children: timeline.map((item, idx) => (_jsxs("div", { className: "bg-white p-6 rounded-[2rem] border-2 border-slate-50 shadow-sm hover:shadow-md transition-all flex items-start gap-6", children: [_jsx("div", { className: `w-12 h-12 rounded-xl flex flex-shrink-0 items-center justify-center text-xl ${item.kind === 'EVIDENCE' ? 'bg-red-50 text-red-600' :
                                                item.kind === 'COMMAND' ? 'bg-amber-50 text-amber-600' :
                                                    item.kind === 'AGENT_EVENT' ? 'bg-cyan-50 text-cyan-600' : 'bg-slate-50 text-slate-600'}`, children: item.kind === 'EVIDENCE' ? '👁️' : item.kind === 'COMMAND' ? '⚡' : '📡' }), _jsxs("div", { className: "flex-1 space-y-2", children: [_jsxs("div", { className: "flex justify-between items-center", children: [_jsx("span", { className: "text-[10px] font-black uppercase tracking-widest text-slate-400", children: item.kind }), _jsx("span", { className: "text-[10px] font-mono text-slate-300", children: new Date(item.t).toLocaleTimeString() })] }), _jsx("p", { className: "font-black text-slate-800", children: item.kind === 'EVIDENCE' ? item.data.summary :
                                                        item.kind === 'COMMAND' ? `${item.data.type} [${item.data.status}]` :
                                                            item.data.event_key }), _jsxs("details", { className: "mt-2 group", children: [_jsx("summary", { className: "text-[9px] font-black text-indigo-500 cursor-pointer uppercase tracking-tighter opacity-60 group-hover:opacity-100", children: "\u0639\u0631\u0636 \u0627\u0644\u0628\u064A\u0627\u0646\u0627\u062A \u0627\u0644\u062E\u0627\u0645 (JSON)" }), _jsx("pre", { className: "mt-3 bg-slate-900 text-indigo-300 p-4 rounded-xl text-[9px] font-mono overflow-x-auto border border-white/5", children: JSON.stringify(item.data, null, 2) })] })] })] }, idx))) })] }), _jsxs("div", { className: "lg:col-span-4 space-y-8", children: [_jsxs("div", { className: "bg-white p-10 rounded-[3rem] shadow-xl border border-slate-50 space-y-8", children: [_jsx("h3", { className: "text-xl font-black text-slate-800 border-b pb-4", children: "\u0625\u062C\u0631\u0627\u0621\u0627\u062A \u0627\u0644\u062A\u062D\u0643\u0645" }), _jsxs("button", { className: "w-full py-6 bg-slate-950 text-white rounded-[2rem] font-black text-lg shadow-xl active:scale-95 transition-all flex items-center justify-center gap-4", children: [_jsx("span", { children: "\uD83D\uDD12" }), "\u0625\u063A\u0644\u0627\u0642 \u0646\u0647\u0627\u0626\u064A \u0644\u0644\u062C\u0647\u0627\u0632"] }), _jsxs("button", { onClick: () => navigate('/evidence'), className: "w-full py-6 bg-indigo-600 text-white rounded-[2rem] font-black text-lg shadow-xl active:scale-95 transition-all flex items-center justify-center gap-4", children: [_jsx("span", { children: "\uD83C\uDFDB\uFE0F" }), "\u0641\u062A\u062D \u0645\u062E\u0632\u0646 \u0627\u0644\u0623\u062F\u0644\u0629"] })] }), _jsxs("div", { className: "bg-slate-900 p-10 rounded-[3rem] text-white shadow-2xl space-y-6 relative overflow-hidden", children: [_jsx("div", { className: "absolute top-0 right-0 w-32 h-32 bg-indigo-600/20 rounded-full blur-3xl" }), _jsx("h3", { className: "text-2xl font-black relative z-10", children: "\u0645\u0639\u0644\u0648\u0645\u0627\u062A \u0627\u0644\u062A\u0647\u062F\u064A\u062F" }), _jsxs("div", { className: "space-y-4 relative z-10 text-xs font-bold text-slate-400", children: [_jsxs("div", { className: "flex justify-between border-b border-white/5 pb-2", children: [_jsx("span", { children: "\u0627\u0644\u062C\u0647\u0627\u0632" }), _jsx("span", { className: "text-indigo-400", children: incident?.device_id })] }), _jsxs("div", { className: "flex justify-between border-b border-white/5 pb-2", children: [_jsx("span", { children: "\u0632\u0645\u0646 \u0627\u0644\u0643\u0634\u0641" }), _jsx("span", { className: "text-indigo-400", children: "0.045s" })] }), _jsxs("div", { className: "flex justify-between", children: [_jsx("span", { children: "\u0628\u0631\u0648\u062A\u0648\u0643\u0648\u0644 \u0646\u0634\u0637" }), _jsx("span", { className: "text-emerald-400", children: "Auto-Defense V1" })] })] })] })] })] })] }));
};
export default FamilyIncidentResponseView;
